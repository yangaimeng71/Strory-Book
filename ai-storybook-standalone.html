<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üé® AIÁªòÊú¨ - ÂÑøÁ´•ÊïÖ‰∫ãÁîüÊàêÂô®</title>
    <meta name="description" content="‰∏∫3-8Â≤ÅÂÑøÁ´•ËÆæËÆ°ÁöÑAIÁªòÊú¨Âàõ‰ΩúÂ∑•ÂÖ∑ÔºåÊîØÊåÅÊïÖ‰∫ãÁîüÊàê„ÄÅÊèíÁîªÈÖçÂõæÂíåËØ≠Èü≥ÊúóËØª">
    <meta name="keywords" content="AIÁªòÊú¨,ÂÑøÁ´•ÊïÖ‰∫ã,ËØ≠Èü≥ÊúóËØª,ÁßªÂä®Á´Ø,ÊïôËÇ≤">
    
    <!-- Ê∑ªÂä†PWAÊîØÊåÅ -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQUnnu5jmnKwiLCJzaG9ydF9uYW1lIjoiQUnnu5jmnKwiLCJzdGFydF91cmwiOiIuIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJ0aGVtZV9jb2xvciI6IiM2NjdlZWEiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI2ZmZmZmZiIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSFpwWlhkQ2IzZzlJakFnTUNBNU5pQTVOaUlnZG1WeWMybHZiajBpTVM0eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTVoY21jdk1qQXdNQzl6ZG1jaVBnbzhZMmx5WTJ4bElHTjRQU0kwT0NJZ1kza1BTSDBPV0NJZ2NqMGlNemt1TmlJZ1ptbHNiRDBpSXpZMk4yVmxZU0lnTHo0OGRHVjRkQ0I0UFNJek5pSWdlVDBpTlRRaUlHWnZiblF0Wm1GdGFXeDVQU0pCY21saGJDSWdabTl1ZEMxemFYcGxQU0l6TUhCNElpQm1hV3hzUFNJalptWm1JaUErOEFvZ1FVa080NGEvYStlN21PZStpVGdnUEM5MFpYaDBQZzhMM04yWnoiLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0=">
    
    <style>
        /* Âü∫Á°ÄÊ†∑ÂºèÈáçÁΩÆ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            line-height: 1.6;
        }

        /* È°µÈù¢ÂÆπÂô® */
        .page {
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow-y: auto;
            opacity: 0;
            animation: fadeIn 0.5s ease-in-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* È¶ñÈ°µÊ†∑Âºè */
        #homePage {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .header {
            margin-bottom: 40px;
            position: relative;
        }

        .settings-btn {
            position: absolute;
            top: -10px;
            right: 0;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .settings-btn:hover, .settings-btn:active {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg) scale(1.1);
        }

        .logo {
            font-size: 2.8rem;
            color: #fff;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .subtitle {
            color: #fff;
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 300;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .input-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            padding: 35px 30px;
            margin-bottom: 30px;
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(15px);
            transform: translateY(0);
            transition: all 0.3s ease;
        }

        .input-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.2);
        }

        .input-section h2 {
            color: #5a67d8;
            margin-bottom: 25px;
            font-size: 1.4rem;
            font-weight: 600;
        }

        #storyInput {
            width: 100%;
            padding: 18px 24px;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            font-size: 1.05rem;
            margin-bottom: 25px;
            background: #fff;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        #storyInput:focus {
            outline: none;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.25);
        }

        .primary-btn {
            width: 100%;
            padding: 18px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.15rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        .primary-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .primary-btn:hover:before {
            left: 100%;
        }

        .primary-btn:hover, .primary-btn:active {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        .preset-themes {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(15px);
        }

        .preset-themes h3 {
            color: #5a67d8;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .theme-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .theme-tag {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #fff;
            padding: 12px 18px;
            border-radius: 28px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            text-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .theme-tag:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .theme-tag:hover:before {
            left: 100%;
        }

        .theme-tag:hover, .theme-tag:active {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 154, 158, 0.4);
        }

        /* Âä†ËΩΩÈ°µÊ†∑Âºè */
        #loadingPage {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .loading-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            padding: 45px 35px;
            box-shadow: 0 18px 50px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(15px);
            max-width: 400px;
            width: 100%;
        }

        .magic-wand {
            font-size: 3.5rem;
            animation: sparkle 2s ease-in-out infinite;
            margin-bottom: 25px;
            position: relative;
        }

        .magic-wand:after {
            content: '‚ú®';
            position: absolute;
            top: -10px;
            right: -15px;
            font-size: 1.5rem;
            animation: twinkle 1.5s ease-in-out infinite alternate;
        }

        @keyframes sparkle {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(12deg) scale(1.1); }
            75% { transform: rotate(-12deg) scale(1.1); }
        }

        @keyframes twinkle {
            0% { opacity: 0.5; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1.2); }
        }

        .loading-text {
            font-size: 1.3rem;
            color: #5a67d8;
            font-weight: 600;
            margin-bottom: 25px;
        }

        .loading-steps {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .step {
            padding: 14px 22px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            color: #5a67d8;
            font-weight: 600;
            opacity: 0.6;
            transition: all 0.4s ease;
            border-left: 4px solid transparent;
        }

        .step.active {
            opacity: 1;
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(8px);
            border-left-color: #667eea;
        }

        /* ÊïÖ‰∫ãÈòÖËØªÈ°µÊ†∑Âºè */
        #storyPage {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 0;
        }

        .story-header {
            background: rgba(255, 255, 255, 0.95);
            padding: 18px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .icon-btn {
            background: rgba(90, 103, 216, 0.1);
            border: none;
            font-size: 1.8rem;
            color: #5a67d8;
            cursor: pointer;
            padding: 10px;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .icon-btn:hover, .icon-btn:active {
            background: rgba(90, 103, 216, 0.2);
            transform: scale(1.1);
        }

        #storyTitle {
            font-size: 1.3rem;
            color: #5a67d8;
            font-weight: 700;
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }

        .page-indicator {
            font-size: 1rem;
            color: #667eea;
            font-weight: 600;
            background: rgba(102, 126, 234, 0.1);
            padding: 8px 12px;
            border-radius: 20px;
        }

        .story-content {
            flex: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .story-image {
            position: relative;
            width: 100%;
            max-width: 420px;
            margin: 0 auto;
            aspect-ratio: 4/3;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.2);
            background: linear-gradient(45deg, #f0f2f5 25%, #e2e8f0 50%, #f0f2f5 75%);
            background-size: 400% 400%;
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .story-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
            transition: all 0.5s ease-in-out;
        }

        .image-loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 18px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .spinner {
            width: 45px;
            height: 45px;
            border: 4px solid rgba(102, 126, 234, 0.2);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .image-loading p {
            color: #667eea;
            font-weight: 600;
            font-size: 1rem;
        }

        .story-text {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px 25px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(15px);
        }

        #storyParagraph {
            font-size: 1.15rem;
            line-height: 1.9;
            color: #4a5568;
            text-align: justify;
            font-weight: 400;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 3px 6px;
            border-radius: 6px;
            animation: glow 1s ease-in-out infinite alternate;
            position: relative;
            box-shadow: 0 2px 8px rgba(168, 237, 234, 0.4);
        }

        @keyframes glow {
            0% { opacity: 0.8; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.02); }
        }

        .control-bar {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 18px;
            box-shadow: 0 -8px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(20px);
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 14px;
            padding: 14px 18px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            min-width: 85px;
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        .nav-btn:disabled {
            background: #e2e8f0;
            color: #a0aec0;
            cursor: not-allowed;
        }

        .nav-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 18px;
            flex: 1;
            justify-content: center;
        }

        .play-btn {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 20px rgba(255, 154, 158, 0.3);
        }

        .play-btn:hover, .play-btn:active {
            transform: scale(1.15);
            box-shadow: 0 8px 30px rgba(255, 154, 158, 0.5);
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            color: #5a67d8;
            font-weight: 600;
        }

        #speedSelect {
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 8px 12px;
            font-size: 0.85rem;
            background: white;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #speedSelect:focus {
            outline: none;
            border-color: #667eea;
        }

        /* ÁªìÊùüÈ°µÊ†∑Âºè */
        #endPage {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .end-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            padding: 45px 35px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(20px);
            max-width: 420px;
            width: 100%;
        }

        .celebration {
            font-size: 4.5rem;
            animation: bounce 2s ease-in-out infinite;
            margin-bottom: 25px;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-25px); }
            60% { transform: translateY(-12px); }
        }

        .end-container h2 {
            color: #5a67d8;
            font-size: 1.6rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .end-container p {
            color: #667eea;
            font-size: 1.05rem;
            margin-bottom: 35px;
            opacity: 0.9;
            font-weight: 500;
        }

        .end-actions {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .secondary-btn {
            background: rgba(102, 126, 234, 0.1);
            color: #5a67d8;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 14px;
            padding: 14px 24px;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-weight: 600;
            font-family: inherit;
        }

        .secondary-btn:hover, .secondary-btn:active {
            background: rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        }

        /* ToastÊèêÁ§∫ */
        .toast {
            position: fixed;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-size: 0.95rem;
            z-index: 1001;
            opacity: 0;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-weight: 600;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(15px);
        }

        /* ÈöêËóèÂÖ∂‰ªñÈ°µÈù¢ */
        .page:not(#homePage) {
            display: none;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 480px) {
            .page { padding: 18px; }
            .logo { font-size: 2.3rem; }
            .input-section { padding: 28px 22px; }
            .preset-themes { padding: 25px; }
            .story-content { padding: 18px; }
            .control-bar { padding: 20px; gap: 15px; }
            .nav-btn { padding: 12px 15px; font-size: 0.85rem; min-width: 75px; }
            .play-btn { width: 50px; height: 50px; font-size: 1.1rem; }
            .audio-controls { gap: 15px; }
        }

        @media (max-width: 360px) {
            .theme-tags { gap: 10px; }
            .theme-tag { padding: 10px 14px; font-size: 0.85rem; }
            .control-bar { 
                flex-direction: column; 
                gap: 18px; 
                padding: 18px;
            }
            .nav-btn { 
                width: 100%; 
                justify-content: center;
                min-width: unset;
            }
            .audio-controls {
                width: 100%;
                justify-content: center;
            }
        }

        /* Âπ≥ÊùøÊ®™Â±è‰ºòÂåñ */
        @media (min-width: 768px) and (orientation: landscape) {
            .story-content {
                flex-direction: row;
                align-items: flex-start;
                gap: 35px;
            }
            
            .story-image {
                flex: 1;
                max-width: none;
            }
            
            .story-text {
                flex: 1;
            }
        }

        /* Â§ßÂ±èÂπï‰ºòÂåñ */
        @media (min-width: 1024px) {
            .page {
                max-width: 650px;
                margin: 0 auto;
            }
            
            body {
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
            }
        }

        /* Ê∑±Ëâ≤‰∏ªÈ¢òÊîØÊåÅ */
        @media (prefers-color-scheme: dark) {
            .input-section,
            .preset-themes,
            .loading-container,
            .story-text,
            .control-bar,
            .end-container {
                background: rgba(45, 55, 72, 0.95);
                color: #e2e8f0;
            }
            
            .input-section h2,
            .preset-themes h3,
            .loading-text,
            #storyTitle,
            .end-container h2 {
                color: #90cdf4;
            }
            
            #storyInput,
            #speedSelect {
                background: rgba(26, 32, 44, 0.8);
                color: #e2e8f0;
                border-color: #4a5568;
            }
        }

        /* ÊâìÂç∞Ê†∑Âºè */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .page {
                background: white !important;
                box-shadow: none;
            }
            
            .control-bar,
            .settings-btn {
                display: none;
            }
        }

        /* È´òÂØπÊØîÂ∫¶Ê®°Âºè */
        @media (prefers-contrast: high) {
            .primary-btn,
            .nav-btn {
                background: #000;
                border: 2px solid #fff;
            }
            
            .theme-tag {
                background: #000;
                border: 2px solid #fff;
            }
        }
    </style>
</head>
<body>
    <!-- È¶ñÈ°µ -->
    <div class="page" id="homePage">
        <div class="header">
            <button id="settingsBtn" class="settings-btn" title="ËÆæÁΩÆ">‚öôÔ∏è</button>
            <h1 class="logo">üé® AIÁªòÊú¨</h1>
            <p class="subtitle">‰∏∫Â≠©Â≠êÂàõÈÄ†Êó†ÈôêÊÉ≥Ë±°ÁöÑÊïÖ‰∫ã‰∏ñÁïå</p>
        </div>
        
        <div class="input-section">
            <h2>ÂëäËØâÊàë‰Ω†ÊÉ≥Âê¨‰ªÄ‰πàÊïÖ‰∫ãÔºü</h2>
            <input type="text" id="storyInput" placeholder="‰æãÂ¶ÇÔºöÂãáÊï¢ÁöÑÂ∞èÂÖîÂ≠ê" maxlength="50" autocomplete="off">
            <button id="generateBtn" class="primary-btn" title="ÂºÄÂßãÂàõ‰ΩúÊïÖ‰∫ã">
                ‚ú® ÂºÄÂßãÂàõ‰ΩúÊïÖ‰∫ã
            </button>
        </div>
        
        <div class="preset-themes">
            <h3>ÊàñËÄÖÈÄâÊã©‰∏Ä‰∏™‰∏ªÈ¢òÔºö</h3>
            <div class="theme-tags">
                <span class="theme-tag" data-theme="ÂãáÊï¢ÁöÑÂ∞èÂä®Áâ©" title="ÁÇπÂáªÈÄâÊã©">üê∞ ÂãáÊï¢Â∞èÂä®Áâ©</span>
                <span class="theme-tag" data-theme="Á•ûÂ•áÁöÑÊ£ÆÊûó" title="ÁÇπÂáªÈÄâÊã©">üå≤ Á•ûÂ•áÊ£ÆÊûó</span>
                <span class="theme-tag" data-theme="ÂèãË∞äÁöÑÂäõÈáè" title="ÁÇπÂáªÈÄâÊã©">üë´ ÂèãË∞äÊïÖ‰∫ã</span>
                <span class="theme-tag" data-theme="Â•áÂ¶ôÁöÑÊµ∑Â∫ï‰∏ñÁïå" title="ÁÇπÂáªÈÄâÊã©">üê† Êµ∑Â∫ï‰∏ñÁïå</span>
                <span class="theme-tag" data-theme="Â§™Á©∫Â§ßÂÜíÈô©" title="ÁÇπÂáªÈÄâÊã©">üöÄ Â§™Á©∫ÂÜíÈô©</span>
                <span class="theme-tag" data-theme="ÂñÑËâØÁöÑÂ∞èÂÖ¨‰∏ª" title="ÁÇπÂáªÈÄâÊã©">üë∏ Á´•ËØùÂÖ¨‰∏ª</span>
            </div>
        </div>
    </div>
    
    <!-- Âä†ËΩΩÈ°µ -->
    <div class="page" id="loadingPage">
        <div class="loading-container">
            <div class="magic-wand" role="img" aria-label="È≠îÊ≥ïÊ£í">‚ú®</div>
            <div class="loading-text">AIÊ≠£Âú®‰∏∫‰Ω†Âàõ‰ΩúÊïÖ‰∫ã...</div>
            <div class="loading-steps">
                <div class="step" id="step1">üìù ÊûÑÊÄùÊïÖ‰∫ãÊÉÖËäÇ</div>
                <div class="step" id="step2">üé® ÁªòÂà∂Á≤æÁæéÊèíÁîª</div>
                <div class="step" id="step3">üéµ ÂáÜÂ§áËØ≠Èü≥ÊúóËØª</div>
            </div>
        </div>
    </div>
    
    <!-- ÊïÖ‰∫ãÈòÖËØªÈ°µ -->
    <div class="page" id="storyPage">
        <div class="story-header">
            <button id="backBtn" class="icon-btn" title="ËøîÂõûÈ¶ñÈ°µ" aria-label="ËøîÂõûÈ¶ñÈ°µ">‚Üê</button>
            <h2 id="storyTitle">ÊïÖ‰∫ãÊ†áÈ¢ò</h2>
            <div class="page-indicator" role="status" aria-live="polite">
                <span id="currentPage">1</span> / <span id="totalPages">1</span>
            </div>
        </div>
        
        <div class="story-content">
            <div class="story-image">
                <img id="storyImg" src="" alt="ÊïÖ‰∫ãÊèíÁîª" style="display: none;">
                <div class="image-loading" id="imageLoading" role="status" aria-live="polite">
                    <div class="spinner" aria-label="Âä†ËΩΩ‰∏≠"></div>
                    <p>Ê≠£Âú®ÁªòÂà∂ÊèíÁîª...</p>
                </div>
            </div>
            
            <div class="story-text">
                <p id="storyParagraph" role="main"></p>
            </div>
        </div>
        
        <div class="control-bar" role="toolbar" aria-label="ÊïÖ‰∫ãÊéßÂà∂">
            <button id="prevBtn" class="nav-btn" disabled title="‰∏ä‰∏ÄÈ°µ" aria-label="‰∏ä‰∏ÄÈ°µ">
                ‚Üê ‰∏ä‰∏ÄÈ°µ
            </button>
            
            <div class="audio-controls">
                <button id="playBtn" class="play-btn" title="Êí≠Êîæ/ÊöÇÂÅú" aria-label="Êí≠ÊîæÊúóËØª">‚ñ∂Ô∏è</button>
                <div class="speed-control">
                    <label for="speedSelect">ËØ≠ÈÄü:</label>
                    <select id="speedSelect" title="ÈÄâÊã©ÊúóËØªËØ≠ÈÄü">
                        <option value="0.8">ÊÖ¢</option>
                        <option value="1.0" selected>Ê≠£Â∏∏</option>
                        <option value="1.2">Âø´</option>
                    </select>
                </div>
            </div>
            
            <button id="nextBtn" class="nav-btn" title="‰∏ã‰∏ÄÈ°µ" aria-label="‰∏ã‰∏ÄÈ°µ">
                ‰∏ã‰∏ÄÈ°µ ‚Üí
            </button>
        </div>
    </div>
    
    <!-- ÁªìÊùüÈ°µ -->
    <div class="page" id="endPage">
        <div class="end-container">
            <div class="celebration" role="img" aria-label="Â∫ÜÁ•ù">üéâ</div>
            <h2>ÊïÖ‰∫ãÁªìÊùüÂï¶ÔºÅ</h2>
            <p>Â∏åÊúõ‰Ω†ÂñúÊ¨¢Ëøô‰∏™ÁæéÂ¶ôÁöÑÊïÖ‰∫ãÔΩû</p>
            
            <div class="end-actions">
                <button id="newStoryBtn" class="primary-btn" title="Âàõ‰ΩúÊñ∞ÊïÖ‰∫ã">
                    ‚ú® ÂÜçÊù•‰∏Ä‰∏™ÊïÖ‰∫ã
                </button>
                <button id="saveStoryBtn" class="secondary-btn" title="‰øùÂ≠òÂà∞Êú¨Âú∞">
                    üìñ ‰øùÂ≠òÊïÖ‰∫ã
                </button>
                <button id="shareStoryBtn" class="secondary-btn" title="ÂàÜ‰∫´ÁªôÊúãÂèã">
                    üì§ ÂàÜ‰∫´ÁªòÊú¨
                </button>
            </div>
        </div>
    </div>

    <!-- ToastÊèêÁ§∫ -->
    <div id="toast" class="toast" role="alert" aria-live="assertive"></div>
    
    <script>
        'use strict';

        // AIÁªòÊú¨Â∫îÁî®‰∏ªÁ±ª
        class StoryApp {
            constructor() {
                this.currentStory = null;
                this.currentPageIndex = 0;
                this.isPlaying = false;
                this.speechSynthesis = window.speechSynthesis;
                this.currentUtterance = null;
                this.highlightTimeout = null;
                this.loadingInterval = null;
                
                this.init();
            }

            init() {
                console.log('üé® AIÁªòÊú¨Â∫îÁî®ÂêØÂä® v2.0');
                try {
                    this.bindEvents();
                    this.showPage('homePage');
                    this.showToast('‚ú® Ê¨¢Ëøé‰ΩøÁî®AIÁªòÊú¨ÔºÅÁÇπÂáª‰∏ªÈ¢òÂºÄÂßãÂàõ‰Ωú');
                    this.preloadVoices();
                } catch (error) {
                    console.error('‚ùå Â∫îÁî®ÂàùÂßãÂåñÂ§±Ë¥•:', error);
                    this.showToast('Â∫îÁî®Âä†ËΩΩÂá∫ÈîôÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
                }
            }

            preloadVoices() {
                // È¢ÑÂä†ËΩΩËØ≠Èü≥ÂêàÊàêÂô®
                if (this.speechSynthesis) {
                    this.speechSynthesis.getVoices();
                    this.speechSynthesis.onvoiceschanged = () => {
                        console.log('üéµ ËØ≠Èü≥Â∫ìÂä†ËΩΩÂÆåÊàê');
                    };
                }
            }

            bindEvents() {
                // È¶ñÈ°µ‰∫ã‰ª∂
                const generateBtn = document.getElementById('generateBtn');
                const storyInput = document.getElementById('storyInput');
                
                if (generateBtn) {
                    generateBtn.addEventListener('click', () => this.generateStory());
                }

                if (storyInput) {
                    storyInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.generateStory();
                        }
                    });

                    // Ëá™Âä®ËÅöÁÑ¶ËæìÂÖ•Ê°Ü
                    storyInput.addEventListener('focus', () => {
                        storyInput.select();
                    });
                }

                // ‰∏ªÈ¢òÊ†áÁ≠æÁÇπÂáª
                document.querySelectorAll('.theme-tag').forEach(tag => {
                    tag.addEventListener('click', () => {
                        const theme = tag.dataset.theme;
                        if (storyInput) storyInput.value = theme;
                        this.generateStory();
                    });
                });

                // ÊïÖ‰∫ãÈ°µÈù¢‰∫ã‰ª∂
                const backBtn = document.getElementById('backBtn');
                if (backBtn) {
                    backBtn.addEventListener('click', () => this.goHome());
                }

                const prevBtn = document.getElementById('prevBtn');
                if (prevBtn) {
                    prevBtn.addEventListener('click', () => this.previousPage());
                }

                const nextBtn = document.getElementById('nextBtn');
                if (nextBtn) {
                    nextBtn.addEventListener('click', () => this.nextPage());
                }

                const playBtn = document.getElementById('playBtn');
                if (playBtn) {
                    playBtn.addEventListener('click', () => this.togglePlayback());
                }

                const speedSelect = document.getElementById('speedSelect');
                if (speedSelect) {
                    speedSelect.addEventListener('change', () => this.stopPlayback());
                }

                // ÁªìÊùüÈ°µÈù¢‰∫ã‰ª∂
                const newStoryBtn = document.getElementById('newStoryBtn');
                if (newStoryBtn) {
                    newStoryBtn.addEventListener('click', () => this.goHome());
                }

                const saveStoryBtn = document.getElementById('saveStoryBtn');
                if (saveStoryBtn) {
                    saveStoryBtn.addEventListener('click', () => this.saveStory());
                }

                const shareStoryBtn = document.getElementById('shareStoryBtn');
                if (shareStoryBtn) {
                    shareStoryBtn.addEventListener('click', () => this.shareStory());
                }

                // ËÆæÁΩÆÊåâÈíÆ
                const settingsBtn = document.getElementById('settingsBtn');
                if (settingsBtn) {
                    settingsBtn.addEventListener('click', () => {
                        this.showToast('üí° ÊèêÁ§∫Ôºö‰ΩøÁî®‰∏çÂêå‰∏ªÈ¢òËØçÂèØ‰ª•ÁîüÊàê‰∏çÂêåÁ±ªÂûãÁöÑÊïÖ‰∫ã');
                    });
                }

                // ÈîÆÁõòÂø´Êç∑ÈîÆ
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.stopPlayback();
                    }
                });

                console.log('‚úÖ ÊâÄÊúâ‰∫ã‰ª∂ÁõëÂê¨Âô®Â∑≤ÁªëÂÆö');
            }

            async generateStory() {
                const storyInput = document.getElementById('storyInput');
                const input = storyInput ? storyInput.value.trim() : '';
                
                if (!input) {
                    this.showToast('‚ùó ËØ∑ËæìÂÖ•ÊïÖ‰∫ã‰∏ªÈ¢òÊàñÈÄâÊã©‰∏Ä‰∏™È¢ÑËÆæ‰∏ªÈ¢ò');
                    if (storyInput) storyInput.focus();
                    return;
                }

                console.log('üöÄ ÂºÄÂßãÁîüÊàêÊïÖ‰∫ã:', input);
                this.showPage('loadingPage');
                this.animateLoadingSteps();

                try {
                    // ÁîüÊàêÊïÖ‰∫ãÂÜÖÂÆπ
                    const story = await this.createStory(input);
                    this.currentStory = story;
                    this.currentPageIndex = 0;

                    // ÁîüÊàêÊèíÁîª
                    await this.generateImages(story);

                    this.showStoryPage();
                    console.log('‚ú® ÊïÖ‰∫ãÁîüÊàêÂÆåÊàê:', story.title);
                    this.showToast('üéâ ÊïÖ‰∫ãÂàõ‰ΩúÂÆåÊàêÔºÅÂèØ‰ª•ÂºÄÂßãÈòÖËØª‰∫Ü');
                } catch (error) {
                    console.error('‚ùå ÁîüÊàêÊïÖ‰∫ãÂ§±Ë¥•:', error);
                    this.showToast('üòî ÊïÖ‰∫ãÁîüÊàêÂ§±Ë¥•ÔºåËØ∑ÈáçËØï');
                    this.showPage('homePage');
                }
            }

            async createStory(theme) {
                // È¢ÑÂÆö‰πâÊïÖ‰∫ãÊ®°Êùø
                const storyTemplates = {
                    'ÂãáÊï¢ÁöÑÂ∞èÂä®Áâ©': {
                        title: 'ÂãáÊï¢ÁöÑÂ∞èÂÖîÂ≠êË¥ùË¥ù',
                        paragraphs: [
                            'Âú®‰∏ÄÁâáÁæé‰∏ΩÁöÑÊ£ÆÊûóÈáåÔºå‰ΩèÁùÄ‰∏ÄÂè™ÂêçÂè´Ë¥ùË¥ùÁöÑÂ∞èÂÖîÂ≠ê„ÄÇË¥ùË¥ùÊúâÁùÄÈõ™ÁôΩÁöÑÊØõÂèëÂíåÁ∫¢ÂÆùÁü≥Ëà¨ÁöÑÁúºÁùõÔºå‰ΩÜÂ•πÊÄªÊòØÂæàËÉÜÂ∞èÔºå‰∏çÊï¢Áã¨Ëá™Âá∫Èó®Êé¢Èô©„ÄÇÊØèÂΩìÂÖ∂‰ªñÂ∞èÂä®Áâ©ÈÇÄËØ∑Â•π‰∏ÄËµ∑Áé©ËÄçÊó∂ÔºåË¥ùË¥ùÊÄªÊòØÊëáÊëáÂ§¥ÔºåË∫≤Âú®Â¶àÂ¶àË∫´Âêé„ÄÇ',
                            '‰∏ÄÂ§©ÔºåÊ£ÆÊûóÈáå‰º†Êù•‰∫ÜÊÄ•‰øÉÁöÑÊ±ÇÊïëÂ£∞„ÄÇÂéüÊù•ÊòØÂ∞èÊùæÈº†Â•áÂ•áÂú®ÈááÊùæÊûúÊó∂‰∏çÂ∞èÂøÉÊéâËøõ‰∫ÜÊ∑±Ê∑±ÁöÑÂ±±Ê¥ûÈáåÔºåÂ§ßÂÆ∂ÈÉΩÂõ¥Âú®Ê¥ûÂè£Âç¥‰∏çÁü•ÈÅìËØ•ÊÄé‰πàÂäû„ÄÇÂä®Áâ©‰ª¨ÁÑ¶ÊÄ•Âú∞ËÆ®ËÆ∫ÁùÄÊïëÊè¥ÊñπÊ°àÔºå‰ΩÜÊ¥ûÂè£Â§™Â∞èÂ§™Ê∑±ÔºåÂ§ßÂÆ∂ÈÉΩËøõ‰∏çÂéª„ÄÇ',
                            'Ë¥ùË¥ùÁúãÂà∞Â§ßÂÆ∂ÈÉΩÂæàÁùÄÊÄ•ÔºåÂøÉÈáå‰πüÂæàÈöæËøá„ÄÇËôΩÁÑ∂Â•πÂæàÂÆ≥ÊÄïÈªëÊöóÁöÑÊ¥ûÁ©¥Ôºå‰ΩÜÂ•πÊÉ≥Ëµ∑‰∫ÜÂ¶àÂ¶àÊõæÁªèËØ¥ËøáÁöÑËØùÔºö"ÁúüÊ≠£ÁöÑÂãáÊï¢‰∏çÊòØ‰∏çÂÆ≥ÊÄïÔºåËÄåÊòØÂç≥‰ΩøÂÆ≥ÊÄï‰πüË¶ÅÂéªÂ∏ÆÂä©ÈúÄË¶ÅÂ∏ÆÂä©ÁöÑ‰∫∫„ÄÇ"ËøôÂè•ËØùÁªô‰∫ÜË¥ùË¥ùÂ∑®Â§ßÁöÑÂãáÊ∞î„ÄÇ',
                            'Ë¥ùË¥ùÊ∑±Ê∑±Âê∏‰∫Ü‰∏ÄÂè£Ê∞îÔºåÈºìËµ∑ÂãáÊ∞îÂØπÂ§ßÂÆ∂ËØ¥Ôºö"ËÆ©ÊàëËØïËØïÂêßÔºÅ"ÁÑ∂ÂêéÂ•πÂ∞èÂøÉÁøºÁøºÂú∞Ë∑≥Ëøõ‰∫ÜÂ±±Ê¥û„ÄÇÊ¥ûÈáåÂæàÈªëÂæàÂÜ∑ÔºåË¥ùË¥ùÁöÑÂøÉÊÄ¶ÊÄ¶Áõ¥Ë∑≥Ôºå‰ΩÜÂ•πÊÉ≥ÁùÄÂ•áÂ•áÈúÄË¶ÅÂ∏ÆÂä©ÔºåÂ∞±‰∏ÄÊ≠•‰∏ÄÊ≠•ÂãáÊï¢Âú∞ÂæÄ‰∏ãËµ∞ÔºåÁî®Â•πÁöÑÂ∞èÁà™Â≠êÊë∏Á¥¢ÁùÄÂâçËøõ„ÄÇ',
                            'Áªà‰∫éÔºåË¥ùË¥ùÂú®Ê¥ûÂ∫ïÊâæÂà∞‰∫ÜÂèó‰º§Âì≠Ê≥£ÁöÑÂ•áÂ•á„ÄÇÂ•πÊ∏©ÊüîÂú∞ÂÆâÊÖ∞Â•áÂ•áÔºö"Âà´ÊÄïÔºåÊàëÊù•Êïë‰Ω†‰∫ÜÔºÅ"ÁÑ∂ÂêéÂ•πÁî®Ëá™Â∑±ÊüîËΩØÁöÑÊØõÂèë‰∏∫Â•áÂ•á‰øùÊöñÔºåÂπ∂ÊÉ≥ÂäûÊ≥ïËÉåÁùÄ‰ªñÊÖ¢ÊÖ¢Áà¨Âá∫‰∫ÜÂ±±Ê¥û„ÄÇÂΩìÂ§ßÂÆ∂ÁúãÂà∞Ë¥ùË¥ùÂÆâÂÖ®Âú∞ÊïëÂá∫Â•áÂ•áÊó∂ÔºåÈÉΩ‰∏∫Â•πÈºìÊéåÂñùÂΩ©„ÄÇ',
                            '‰ªéÈÇ£Â§©Ëµ∑ÔºåË¥ùË¥ùÂÜç‰πü‰∏çÊòØÈÇ£Âè™ËÉÜÂ∞èÁöÑÂ∞èÂÖîÂ≠ê‰∫Ü„ÄÇÂ•πÂ≠¶‰ºö‰∫ÜÂãáÊï¢Ôºå‰πüÊòéÁôΩ‰∫ÜÂ∏ÆÂä©Âà´‰∫∫‰ºöËÆ©Ëá™Â∑±ÂèòÂæóÊõ¥Âä†Âº∫Â§ßÂíåÂø´‰πê„ÄÇÊ£ÆÊûóÈáåÁöÑÂ∞èÂä®Áâ©‰ª¨ÈÉΩÂæà‰Ω©ÊúçË¥ùË¥ùÔºåÂ•π‰πüÊàê‰∏∫‰∫ÜÂ§ßÂÆ∂ÊúÄÂ•ΩÁöÑÊúãÂèã„ÄÇÂãáÊï¢ÁöÑË¥ùË¥ùÂëäËØâÊàë‰ª¨ÔºöÊØè‰∏™‰∫∫ÂøÉ‰∏≠ÈÉΩÊúâ‰∏ÄÈ¢óÂãáÊï¢ÁöÑÁßçÂ≠êÔºåÂè™Ë¶ÅÊàë‰ª¨ÊÑøÊÑèÂéªÂ∏ÆÂä©Âà´‰∫∫ÔºåËøôÈ¢óÁßçÂ≠êÂ∞±‰ºöÂèëËäΩÊàêÈïø„ÄÇ'
                        ]
                    },
                    'Á•ûÂ•áÁöÑÊ£ÆÊûó': {
                        title: 'Á•ûÂ•áÊ£ÆÊûóÁöÑÁßòÂØÜ',
                        paragraphs: [
                            'Âú®ÈÅ•ËøúÁöÑÂ±±Ë∞∑Ê∑±Â§ÑÔºåÊúâ‰∏ÄÁâáÁ•ûÂ•áÁöÑÊ£ÆÊûóÔºåËøôÈáåÁöÑÊ†ëÊú®‰ºöÂèëÂá∫Ê∏©ÊöñÁöÑÂÖâËäíÔºåËä±Êúµ‰ºöÂî±Âá∫ÁæéÂ¶ôÁöÑÊ≠åÂ£∞ÔºåËù¥Ëù∂ÁöÑÁøÖËÜÄÂÉèÂΩ©Ëôπ‰∏ÄÊ†∑ÁªöÁÉÇÂ§öÂΩ©„ÄÇÂ∞èÂ•≥Â≠©ËéâËéâÂú®‰∏ÄÊ¨°Ëø∑Ë∑ØÊó∂ÂÅ∂ÁÑ∂ÂèëÁé∞‰∫ÜËøô‰∏™Â•áÂ¶ôÁöÑÂú∞ÊñπÔºåÂ•πË¢´ÁúºÂâçÁöÑÁæéÊôØÊ∑±Ê∑±ÈúáÊíº‰∫Ü„ÄÇ',
                            'ËéâËéâËµ∞ËøõÊ£ÆÊûóÊ∑±Â§ÑÔºåÈÅáÂà∞‰∫Ü‰∏ÄÂè™‰ºöËØ¥ËØùÁöÑÂ∞èÈπø„ÄÇÂ∞èÈπøÁî®Ê∏©ÊüîÁöÑÂ£∞Èü≥ÂëäËØâÂ•πÔºåËøôÁâáÊ£ÆÊûóÊ≠£Èù¢‰∏¥ÁùÄÂ∑®Â§ßÁöÑÂç±Èô©ÔºåÈÇ™ÊÅ∂ÁöÑÈªëÊöóÂ∑´Â∏àÊÉ≥Ë¶ÅÂ§∫Ëµ∞Ê£ÆÊûóÁöÑÈ≠îÊ≥ïÂäõÈáèÔºåËÆ©ÊâÄÊúâÁæéÂ•ΩÁöÑ‰∏úË•øÈÉΩÊ∂àÂ§±‰∏çËßÅÔºåÂèòÊàê‰∏ÄÁâáÊ≠ªÂØÇÁöÑËçíÂú∞„ÄÇ',
                            'ÂñÑËâØÁöÑËéâËéâÂê¨‰∫ÜÈùûÂ∏∏ÈöæËøáÔºåÂ•πÂÜ≥ÂÆöÂ∏ÆÂä©Ê£ÆÊûóÂ∫¶ËøáËøô‰∏™Âç±Êú∫„ÄÇÂ∞èÈπøÂ∏¶Â•πÂéªËßÅÊ£ÆÊûóÈáåÊúÄÊô∫ÊÖßÁöÑËÄÅÊ†ëÁà∑Áà∑ÔºåËÄÅÊ†ëÁà∑Áà∑Áî®ËãçËÄÅÂç¥ÂùöÂÆöÁöÑÂ£∞Èü≥ÂëäËØâÂ•πÔºåÂè™ÊúâÈõÜÈΩê‰∏âÈ¢ó‰∏çÂêåÈ¢úËâ≤ÁöÑÈ≠îÊ≥ïÂÆùÁü≥ÔºåÊâçËÉΩÂΩ¢Êàê‰øùÊä§Ê£ÆÊûóÁöÑÂº∫Â§ßÈ≠îÊ≥ïÂ±èÈöú„ÄÇ',
                            'ËéâËéâÂºÄÂßã‰∫ÜÂØªÊâæÈ≠îÊ≥ïÂÆùÁü≥ÁöÑÂÜíÈô©‰πãÊóÖ„ÄÇÂ•πÂ∏ÆÂä©Ëø∑Ë∑ØÁöÑÂ∞èÈ∏üÊâæÂà∞ÂõûÂÆ∂ÁöÑË∑ØÔºåÂ∞èÈ∏üÊÑüÂä®Âú∞ÈÄÅÁªôÂ•π‰∏ÄÈ¢óËìùËâ≤ÁöÑÂèãÂñÑÂÆùÁü≥ÔºõÂ•πÊïëÂä©‰∫ÜË¢´ËçÜÊ£òÁº†‰ΩèÁöÑÂ∞èÁãêÁã∏ÔºåÂ∞èÁãêÁã∏ÊÑüÊøÄÂú∞Ëµ†ÈÄÅÁªôÂ•π‰∏ÄÈ¢óÁ∫¢Ëâ≤ÁöÑÁà±ÂøÉÂÆùÁü≥„ÄÇÊØè‰∏ÄÊ¨°ÂñÑË°åÈÉΩËÆ©ËéâËéâÁöÑÂøÉÊõ¥Âä†Ê∏©Êöñ„ÄÇ',
                            'ÊúÄÂêé‰∏ÄÈ¢óÁªøËâ≤ÁöÑÂãáÊ∞îÂÆùÁü≥ËóèÂú®ÊúÄÂç±Èô©ÁöÑÈªëÊöóÂ±±Ë∞∑ÈáåÔºåÈÇ£ÈáåÊúâÂ∑´Â∏àËÆæ‰∏ãÁöÑÈáçÈáçÊú∫ÂÖ≥„ÄÇËéâËéâËôΩÁÑ∂ÂøÉÈáåÂæàÂÆ≥ÊÄïÔºå‰ΩÜÊÉ≥Âà∞Ê£ÆÊûóÈáåÊâÄÊúâÂèØÁà±ÁöÑÊúãÂèã‰ª¨ÔºåÂ•πÈºìËµ∑ÂãáÊ∞îÔºåÂá≠ÂÄüÊô∫ÊÖßÂíåÂùöÊåÅÔºåÁªà‰∫éÊàêÂäüÂèñÂæó‰∫ÜÊúÄÂêé‰∏ÄÈ¢óÂÆùÁü≥„ÄÇ',
                            'ÂΩì‰∏âÈ¢óÈ≠îÊ≥ïÂÆùÁü≥ËÅöÈõÜÂú®‰∏ÄËµ∑Êó∂ÔºåÂÆÉ‰ª¨ÂèëÂá∫‰∫ÜËÄÄÁúºÁöÑÂΩ©Ëâ≤ÂÖâËäíÔºåÂΩ¢Êàê‰∫Ü‰∏ÄÈÅìÂº∫Â§ßÁöÑ‰øùÊä§Â±èÈöúÔºåÊàêÂäüÈ©±Ëµ∞‰∫ÜÈÇ™ÊÅ∂ÁöÑÈªëÊöóÂ∑´Â∏à„ÄÇÊ£ÆÊûóÈáçÊñ∞ÊÅ¢Â§ç‰∫ÜÂæÄÊó•ÁöÑÁæé‰∏ΩÂíåÁîüÊú∫ÔºåÊâÄÊúâÁöÑÂä®Áâ©ÂíåÊ§çÁâ©ÈÉΩÊÑüË∞¢ËéâËéâÁöÑÂãáÊï¢ÂíåÂñÑËâØ„ÄÇ‰ªéÊ≠§‰ª•ÂêéÔºåËéâËéâÊàê‰∏∫‰∫ÜÊ£ÆÊûóÁöÑÂÆàÊä§ËÄÖÔºåÂ•πÊòéÁôΩ‰∫ÜÂñÑËâØÂíåÂãáÊï¢ÁöÑÂäõÈáèÊòØ‰∏ñÁïå‰∏äÊúÄÁèçË¥µÁöÑÈ≠îÊ≥ï„ÄÇ'
                        ]
                    },
                    'ÂèãË∞äÁöÑÂäõÈáè': {
                        title: 'ÊúÄÂ•ΩÁöÑÊúãÂèã',
                        paragraphs: [
                            'Âú®‰∏ÄÁâáÁªøÊÑèÁõéÁÑ∂ÁöÑÊ£ÆÊûóÈáåÔºåÂ∞èÁÜäÊ≥¢Ê≥¢ÂíåÂ∞èÂÖîË∑≥Ë∑≥ÊòØÊúÄÂ•ΩÊúÄÂ•ΩÁöÑÊúãÂèã„ÄÇ‰ªñ‰ª¨ÊØèÂ§©‰∏ÄËµ∑Âú®ËçâÂú∞‰∏äÁé©ËÄçÔºå‰∏ÄËµ∑ÂàÜ‰∫´ÁæéÂë≥ÁöÑËúÇËúúÂíåËÉ°ËêùÂçúÔºå‰∏ÄËµ∑Âú®Ê†ëËç´‰∏ãÂê¨È∏üÂÑøÂî±Ê≠å„ÄÇÊ£ÆÊûóÈáåÁöÑÂÖ∂‰ªñÂ∞èÂä®Áâ©ÈÉΩÈùûÂ∏∏Áæ°ÊÖï‰ªñ‰ª¨Ê∑±ÂéöÁöÑÂèãË∞äÔºåËÆ§‰∏∫‰ªñ‰ª¨ÊòØ‰∏ñÁïå‰∏äÊúÄÂπ∏Á¶èÁöÑ‰∏ÄÂØπÂ•ΩÊúãÂèã„ÄÇ',
                            'Êúâ‰∏ÄÂ§©ÔºåÊ£ÆÊûóÈáåÊù•‰∫Ü‰∏ÄÂè™Êñ∞ÊúãÂèã‚Äî‚ÄîËÅ™ÊòéÊ¥ªÊ≥ºÁöÑÂ∞èÁå¥Â≠êÁöÆÁöÆ„ÄÇÁöÆÁöÆ‰ºöÂæàÂ§öÊúâË∂£ÁöÑÊ∏∏ÊàèÂíåÈ≠îÊúØÔºåËøò‰ºöËÆ≤ËÆ∏Â§öÁ≤æÂΩ©ÁöÑÂÜíÈô©ÊïÖ‰∫ã„ÄÇÊ≥¢Ê≥¢ÂæàÂø´Â∞±Ë¢´ÁöÆÁöÆÁöÑÊâçÂçéÂê∏Âºï‰∫ÜÔºåÂºÄÂßãËä±Ë∂äÊù•Ë∂äÂ§öÁöÑÊó∂Èó¥ÂíåÁöÆÁöÆ‰∏ÄËµ∑Áé©ËÄçÔºåÂ≠¶‰π†Êñ∞ÁöÑÊäÄËÉΩ„ÄÇ',
                            'Ë∑≥Ë∑≥ÁúãÂà∞Ê≥¢Ê≥¢ÂíåÁöÆÁöÆÁé©ÂæóÈÇ£‰πàÂºÄÂøÉÔºåÂøÉÈáåÂºÄÂßãÊÑüÂà∞Â≠§ÂçïÂíåÂ´âÂ¶í„ÄÇÂ•πËßâÂæóÊ≥¢Ê≥¢‰∏çÂÜçÂÉè‰ª•ÂâçÈÇ£Ê†∑ÂñúÊ¨¢ÂíåÂ•πÂú®‰∏ÄËµ∑‰∫ÜÔºåÊãÖÂøÉÁöÆÁöÆ‰ºöÊä¢Ëµ∞Â•πÊúÄÂ•ΩÁöÑÊúãÂèã„ÄÇ‰∫éÊòØË∑≥Ë∑≥ÂºÄÂßãÁñèËøúÊ≥¢Ê≥¢ÔºåÁîöËá≥ÂØπÊñ∞Êù•ÁöÑÁöÆÁöÆ‰πüË°®Áé∞Âá∫‰∏çÂèãÂ•ΩÁöÑÊÄÅÂ∫¶ÔºåÂøÉÊÉÖÂèòÂæóË∂äÊù•Ë∂äÊ≤Æ‰∏ß„ÄÇ',
                            'ÊïèÊÑüÁöÑÊ≥¢Ê≥¢ÂæàÂø´Ê≥®ÊÑèÂà∞‰∫ÜË∑≥Ë∑≥ÁöÑÂèòÂåñÔºå‰ªñÁöÑÂøÉÈáå‰πüÂèòÂæóÂæàÂõ∞ÊÉëÂíåÈöæËøá„ÄÇÁªèËøáÊ∑±ÊÄùÁÜüËôëÂêéÔºåÊ≥¢Ê≥¢‰∏ªÂä®ÊâæÂà∞‰∫ÜË∑≥Ë∑≥ÔºåËØöÊÅ≥Âú∞ÂØπÂ•πËØ¥Ôºö"Ë∑≥Ë∑≥Ôºå‰Ω†Ê∞∏ËøúÊòØÊàëÊúÄÁèçË¥µÁöÑÊúãÂèãÔºåËøô‰∏ÄÁÇπÊ∞∏Ëøú‰∏ç‰ºöÊîπÂèò„ÄÇÊàëÂ∏åÊúõÊàë‰ª¨‰∏â‰∏™ÈÉΩËÉΩÊàê‰∏∫Â•ΩÊúãÂèãÔºå‰∏ÄËµ∑ÂàÜ‰∫´Êõ¥Â§öÁöÑÂø´‰πêÊó∂ÂÖâ„ÄÇ"',
                            'Âê¨‰∫ÜÊ≥¢Ê≥¢ÁúüËØöÁöÑËØùËØ≠ÔºåË∑≥Ë∑≥ÊÑèËØÜÂà∞Ëá™Â∑±ÁöÑÊÉ≥Ê≥ïÊòØÈîôËØØÁöÑ„ÄÇÂ•π‰∏ªÂä®ÊâæÂà∞ÁöÆÁöÆÔºå‰∏∫Ëá™Â∑±‰πãÂâçÁöÑÂÜ∑Ê∑°ÊÄÅÂ∫¶ÈÅìÊ≠âÔºåÂπ∂ÁúüÂøÉÈÇÄËØ∑ÁöÆÁöÆÂä†ÂÖ•‰ªñ‰ª¨ÁöÑÊ∏∏Êàè„ÄÇÁöÆÁöÆ‰πüÂæàÈ´òÂÖ¥ËÉΩÂ§üÂíåË∑≥Ë∑≥Êàê‰∏∫ÊúãÂèãÔºå‰∏â‰∏™Â∞èÂä®Áâ©ÂæàÂø´Â∞±Êàê‰∏∫‰∫ÜÊúÄÂ•ΩÁöÑÊúãÂèãÁªÑÂêà„ÄÇ',
                            '‰ªéÈÇ£‰ª•ÂêéÔºåÊ≥¢Ê≥¢„ÄÅË∑≥Ë∑≥ÂíåÁöÆÁöÆÊàê‰∏∫‰∫ÜÊ£ÆÊûóÈáåÊúÄÂø´‰πêÁöÑ‰∏â‰∫∫Â∞èÂõ¢‰Ωì„ÄÇ‰ªñ‰ª¨‰∏ÄËµ∑Êé¢Èô©„ÄÅ‰∏ÄËµ∑Â≠¶‰π†„ÄÅ‰∏ÄËµ∑ÊàêÈïø„ÄÇÈÄöËøáËøôÊ¨°ÁªèÂéÜÔºå‰ªñ‰ª¨ÈÉΩÊòéÁôΩ‰∫Ü‰∏Ä‰∏™ÈáçË¶ÅÁöÑÈÅìÁêÜÔºöÁúüÊ≠£ÁöÑÂèãË∞ä‰∏çÊòØÁã¨Âç†ÂíåÊéíÊñ•ÔºåËÄåÊòØÂåÖÂÆπÂíåÂàÜ‰∫´Ôºõ‰∏çÊòØÂ´âÂ¶íÂíåÁ´û‰∫âÔºåËÄåÊòØÁêÜËß£ÂíåÊîØÊåÅ„ÄÇÂèãË∞äÁöÑÂäõÈáèÂú®‰∫éËÆ©ÊØè‰∏™‰∫∫ÈÉΩÂèòÂæóÊõ¥Â•ΩÔºåËÆ©‰∏ñÁïåÂèòÂæóÊõ¥Âä†ÁæéÂ•Ω„ÄÇ'
                        ]
                    },
                    'Â•áÂ¶ôÁöÑÊµ∑Â∫ï‰∏ñÁïå': {
                        title: 'Â∞èÊµ∑Ë±öÁöÑÂ§ßÂÜíÈô©',
                        paragraphs: [
                            'Âú®Ê∑±ËìùÊ∑±ËìùÁöÑÂ§ßÊµ∑ÈáåÔºå‰ΩèÁùÄ‰∏ÄÂè™Ê¥ªÊ≥ºÂèØÁà±ÁöÑÂ∞èÊµ∑Ë±öÊúµÊúµ„ÄÇÊúµÊúµÊúâÁùÄÈì∂ÁôΩËâ≤ÁöÑÂÖâÊªëÁöÆËÇ§Âíå‰∫ÆÊô∂Êô∂ÁöÑÂ§ßÁúºÁùõÔºåÂ•πÊúÄÂñúÊ¨¢ÂíåÊµ∑Ê¥ãÊúãÂèã‰ª¨‰∏ÄËµ∑Âú®ÁèäÁëöÁ§ÅÈó¥Ê∏∏Êù•Ê∏∏ÂéªÔºåÊé¢Á¥¢Êµ∑Â∫ï‰∏ñÁïåÁöÑÂ•áÂ¶ôÁßòÂØÜ„ÄÇ',
                            '‰∏ÄÂ§©ÔºåÊúµÊúµÂê¨ËØ¥Êµ∑Ê¥ãÊ∑±Â§ÑÊúâ‰∏ÄÈ¢óËÉΩÂÆûÁé∞ÊÑøÊúõÁöÑÁ•ûÂ•áÁèçÁè†Ôºå‰ΩÜÊòØË¶ÅÊâæÂà∞ÂÆÉÈúÄË¶ÅÈÄöËøá‰∏â‰∏™ÊåëÊàò„ÄÇÂãáÊï¢ÁöÑÊúµÊúµÂÜ≥ÂÆöË∏è‰∏äËøôÊÆµÂÜíÈô©ÊóÖÁ®ãÔºåÂ•πÊÉ≥Ë¶ÅËÆ∏ÊÑøËÆ©ÊâÄÊúâÊµ∑Ê¥ãÁîüÁâ©ÈÉΩËÉΩÂø´‰πêÂú∞ÁîüÊ¥ªÂú®‰∏ÄËµ∑„ÄÇ',
                            'Á¨¨‰∏Ä‰∏™ÊåëÊàòÊòØË¶ÅÂ∏ÆÂä©Ëø∑Ë∑ØÁöÑÂ∞èÈ±ºÁæ§ÊâæÂà∞ÂõûÂÆ∂ÁöÑË∑Ø„ÄÇÊúµÊúµÁî®Â•πÊïèÈîêÁöÑÂ£∞ÂëêÂÆö‰ΩçËÉΩÂäõÔºåÂºïÂØºÁùÄÂ∞èÈ±º‰ª¨Á©øËøáÂç±Èô©ÁöÑÊµ∑Ê≤üÔºåÂÆâÂÖ®ÂõûÂà∞‰∫ÜÂÆÉ‰ª¨Ê∏©ÊöñÁöÑÂÆ∂„ÄÇÂ∞èÈ±º‰ª¨ÊÑüÊøÄÂú∞ÈÄÅÁªôÊúµÊúµ‰∏ÄÁâáÈó™‰∫ÆÁöÑÈ≥ûÁâá‰Ωú‰∏∫Á§ºÁâ©„ÄÇ',
                            'Á¨¨‰∫å‰∏™ÊåëÊàòÊõ¥Âä†Âõ∞ÈöæÔºåÊúµÊúµÈúÄË¶ÅÂäùÊúçËÑæÊ∞îÊö¥Ë∫ÅÁöÑÁ´†È±ºÂÖàÁîü‰∏çË¶ÅÊ¨∫Ë¥üÂÖ∂‰ªñÂ∞èÂä®Áâ©„ÄÇÊúµÊúµÁî®ËÄêÂøÉÂíåÊô∫ÊÖß‰∏éÁ´†È±ºÂÖàÁîü‰∫§ÊµÅÔºå‰∫ÜËß£Âà∞‰ªñÂÖ∂ÂÆûÂæàÂ≠§Áã¨„ÄÇÊúµÊúµÈÇÄËØ∑Á´†È±ºÂÖàÁîüÂä†ÂÖ•Â•πÁöÑÊúãÂèãÂúàÔºåÁ´†È±ºÂÖàÁîü‰ªéÊ≠§ÂèòÂæóÂèãÂñÑËµ∑Êù•„ÄÇ',
                            'ÊúÄÂêéÁöÑÊåëÊàòÊòØË¶ÅÂú®ÈªëÊöóÁöÑÊµ∑Â∫ïÊ¥ûÁ©¥‰∏≠ÊâæÂà∞Á•ûÂ•áÁèçÁè†„ÄÇÊúµÊúµÂÖãÊúç‰∫ÜÂØπÈªëÊöóÁöÑÊÅêÊÉßÔºåÂá≠ÂÄüÁùÄÂãáÊ∞îÂíå‰πãÂâçËé∑ÂæóÁöÑÂ∏ÆÂä©ÔºåÁªà‰∫éÊâæÂà∞‰∫ÜÈÇ£È¢óÂèëÁùÄÊ∏©ÊüîÂÖâËäíÁöÑÁèçÁè†„ÄÇ',
                            'ÂΩìÊúµÊúµËÆ∏‰∏ã"ËÆ©ÊâÄÊúâÊµ∑Ê¥ãÁîüÁâ©ÂíåË∞êÂÖ±Â§Ñ"ÁöÑÊÑøÊúõÊó∂ÔºåÊï¥‰∏™Êµ∑Ê¥ãÈÉΩË¢´Ê∏©ÊöñÁöÑÂÖâËäíÂåÖÂõ¥‰∫Ü„ÄÇ‰ªéÈÇ£‰ª•ÂêéÔºåÊµ∑Â∫ï‰∏ñÁïåÂèòÂæóÊõ¥Âä†Áæé‰∏ΩÂíåË∞êÔºåÊâÄÊúâÁöÑÁîüÁâ©ÈÉΩÊàê‰∏∫‰∫ÜÊúãÂèã„ÄÇÊúµÊúµ‰πüÊòéÁôΩ‰∫ÜÔºåÊúÄÁ•ûÂ•áÁöÑÈ≠îÊ≥ïÂÖ∂ÂÆûÂ∞±ÊòØÁà±ÂøÉÂíåÂèãÂñÑ„ÄÇ'
                        ]
                    },
                    'Â§™Á©∫Â§ßÂÜíÈô©': {
                        title: 'Â∞èÊòüÊòüÁöÑÂÆáÂÆô‰πãÊóÖ',
                        paragraphs: [
                            'Âú®ÈÅ•ËøúÁöÑÈì∂Ê≤≥Á≥ªËæπÁºòÔºåÊúâ‰∏ÄÈ¢óÂêçÂè´Èó™Èó™ÁöÑÂ∞èÊòüÊòüÔºåÂ•π‰∏ÄÁõ¥Ê¢¶ÊÉ≥ÁùÄËÉΩÂ§üÁéØÊ∏∏Êï¥‰∏™ÂÆáÂÆôÔºåÁúãÁúãÂÖ∂‰ªñÊòüÁêÉ‰∏äÁöÑÂ•áÂ¶ôÊôØË±°„ÄÇËôΩÁÑ∂Â•πËøòÂæàÂπ¥ËΩªÔºåÂÖâËäí‰πü‰∏çÂ§üÊòé‰∫ÆÔºå‰ΩÜÂ•πÊúâ‰∏ÄÈ¢óÂãáÊï¢Êé¢Á¥¢ÁöÑÂøÉ„ÄÇ',
                            '‰∏ÄÂ§©ÔºåÈó™Èó™ÈÅáÂà∞‰∫Ü‰∏ÄËâòËø∑Ë∑ØÁöÑÂ§™Á©∫ËàπÔºåËàπ‰∏äÁöÑÂ∞èÂÆáËà™ÂëòÈòøÂº∫Ê≠£Âú®ÂØªÊâæÂõûÂú∞ÁêÉÁöÑË∑Ø„ÄÇÈó™Èó™ÂÜ≥ÂÆöÂ∏ÆÂä©ÈòøÂº∫Ôºå‰ªñ‰ª¨‰∏ÄËµ∑Ë∏è‰∏ä‰∫ÜÁ©øË∂äÂÆáÂÆôÁöÑÂ•áÂ¶ôÊóÖÁ®ãÔºåËßÅËØÅ‰∫ÜËÆ∏Â§ö‰ªéÊú™ËßÅËøáÁöÑÁæé‰∏ΩÊôØË±°„ÄÇ',
                            'Âú®ÊóÖÈÄî‰∏≠Ôºå‰ªñ‰ª¨ÁªèËøá‰∫ÜÂΩ©ËôπÊòüÁêÉÔºåÈÇ£ÈáåÁöÑ‰∏ÄÂàáÈÉΩÊòØ‰∫îÈ¢úÂÖ≠Ëâ≤ÁöÑÔºõÈ£ûËøá‰∫ÜÈü≥‰πêÊòüÁêÉÔºåÊï¥‰∏™ÊòüÁêÉÈÉΩÂú®ÊºîÂ•èÁùÄÁæéÂ¶ôÁöÑ‰∫§Âìç‰πêÔºõËøòÊãúËÆø‰∫ÜÁ≥ñÊûúÊòüÁêÉÔºåÈÇ£ÈáåÁöÑÂ±±ËÑâÈÉΩÊòØÁî®Â∑ßÂÖãÂäõÂÅöÊàêÁöÑÔºåÊ≤≥ÊµÅÈÉΩÊòØÁîúÁîúÁöÑÊûúÊ±Å„ÄÇ',
                            '‰ΩÜÊòØÊóÖÈÄîÂπ∂‰∏çÊÄªÊòØÈ°∫Âà©ÁöÑÔºå‰ªñ‰ª¨ÈÅáÂà∞‰∫ÜÂ§™Á©∫È£éÊö¥ÔºåËøòÂ∑ÆÁÇπË¢´ÈªëÊ¥ûÂê∏Ëµ∞„ÄÇÂÖ≥ÈîÆÊó∂ÂàªÔºåÈó™Èó™ÂèëÁé∞‰∫ÜËá™Â∑±ÂÜÖÂøÉÊ∑±Â§ÑÁöÑÂÖâËäíÔºåÂ•πÂä™ÂäõËÆ©Ëá™Â∑±ÂèëÂÖâÂèëÁÉ≠Ôºå‰∏∫ÈòøÂº∫ÊåáÂºï‰∫ÜÊ≠£Á°ÆÁöÑÊñπÂêë„ÄÇ',
                            'ÁªèËøáËÆ∏Â§öÂÜíÈô©ÔºåÈó™Èó™ÂíåÈòøÂº∫Áªà‰∫éÊâæÂà∞‰∫ÜÂõûÂú∞ÁêÉÁöÑË∑Ø„ÄÇÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåÈó™Èó™‰∏ç‰ªÖÂ∏ÆÂä©‰∫ÜÊúãÂèãÔºå‰πüÂèëÁé∞‰∫ÜËá™Â∑±ÁöÑ‰ª∑ÂÄºÂíåÂäõÈáè„ÄÇÂ•πÊòéÁôΩ‰∫ÜÔºåÊØèÈ¢óÊòüÊòüÈÉΩÊúâËá™Â∑±Áã¨ÁâπÁöÑÂÖâËäíÂíå‰ΩøÂëΩ„ÄÇ',
                            'ÂΩìÈòøÂº∫ÂÆâÂÖ®ÂõûÂà∞Âú∞ÁêÉÊó∂Ôºå‰ªñÂêëÊâÄÊúâ‰∫∫ËÆ≤Ëø∞‰∫ÜÂ∞èÊòüÊòüÈó™Èó™ÁöÑÂãáÊï¢ÊïÖ‰∫ã„ÄÇ‰ªéÈÇ£‰ª•ÂêéÔºåÈó™Èó™Êàê‰∏∫‰∫ÜÂÆáÂÆô‰∏≠ÊúÄÂèóÂ∞äÊï¨ÁöÑÂØºËà™ÊòüÔºåÁî®Ëá™Â∑±ÁöÑÂÖâËäí‰∏∫ÊâÄÊúâËø∑Ë∑ØÁöÑÊóÖË°åËÄÖÊåáÂºïÂõûÂÆ∂ÁöÑÊñπÂêë„ÄÇ'
                        ]
                    },
                    'ÂñÑËâØÁöÑÂ∞èÂÖ¨‰∏ª': {
                        title: 'Áé´Áë∞ÂÖ¨‰∏ªÁöÑÈ≠îÊ≥ïËä±Âõ≠',
                        paragraphs: [
                            'Âú®‰∏Ä‰∏™Áæé‰∏ΩÁöÑÁéãÂõΩÈáåÔºå‰ΩèÁùÄ‰∏Ä‰ΩçÂøÉÂú∞ÂñÑËâØÁöÑÂ∞èÂÖ¨‰∏ªÔºåÂ§ßÂÆ∂ÈÉΩÂè´Â•πÁé´Áë∞ÂÖ¨‰∏ª„ÄÇÂ•πÊúâÁùÄÈáëËâ≤ÁöÑÂç∑ÂèëÂíåÊ∏©ÊöñÁöÑÁ¨ëÂÆπÔºå‰ΩÜÊúÄÁâπÂà´ÁöÑÊòØÂ•πÊã•Êúâ‰∏ÄÂ∫ßÁ•ûÂ•áÁöÑËä±Âõ≠ÔºåÈÇ£ÈáåÁßçÁùÄ‰∏ñÁïå‰∏äÊúÄÁæéÁöÑËä±Êúµ„ÄÇ',
                            'Áé´Áë∞ÂÖ¨‰∏ªÁöÑËä±Âõ≠Êúâ‰∏Ä‰∏™ÁßòÂØÜÔºöÂè™Ë¶ÅÂÖ¨‰∏ªÂØπËä±Êúµ‰ª¨ËØ¥Âá∫ÂñÑËâØÁöÑËØùËØ≠ÔºåËä±Êúµ‰ª¨Â∞±‰ºöÁªΩÊîæÂæóÊõ¥Âä†Áæé‰∏ΩÔºåÊï£ÂèëÂá∫Ê≤ªÊÑà‰∫∫ÂøÉÁöÑÈ¶ôÊ∞î„ÄÇÂÖ¨‰∏ªÊØèÂ§©ÈÉΩ‰ºöÂú®Ëä±Âõ≠ÈáåÂíåËä±Êúµ‰ª¨ËÅäÂ§©ÔºåÂëäËØâÂÆÉ‰ª¨ÂÖ≥‰∫éÂñÑËâØÂíåÁà±ÁöÑÊïÖ‰∫ã„ÄÇ',
                            'Êúâ‰∏ÄÂ§©ÔºåÈÇªÂõΩÊù•‰∫Ü‰∏Ä‰ΩçÁîüÁóÖÁöÑÂ∞èÁéãÂ≠êÔºå‰ªª‰ΩïËçØÁâ©ÈÉΩÊó†Ê≥ïÊ≤ªÊÑà‰ªñÁöÑÁñæÁóÖÔºå‰ªñÂèòÂæóË∂äÊù•Ë∂äËôöÂº±„ÄÇÁé´Áë∞ÂÖ¨‰∏ªÂê¨ËØ¥ÂêéÔºåÂÜ≥ÂÆöÁî®Ëá™Â∑±Ëä±Âõ≠ÈáåÁöÑÈ≠îÊ≥ïËä±ÊúµÊù•Â∏ÆÂä©Â∞èÁéãÂ≠êÊÅ¢Â§çÂÅ•Â∫∑„ÄÇ',
                            'ÂÖ¨‰∏ªÁ≤æÂøÉÊåëÈÄâ‰∫ÜÊúÄÁæé‰∏ΩÁöÑÁé´Áë∞Ëä±ÔºåÁî®ÂÆÉ‰ª¨Âà∂‰Ωú‰∫Ü‰∏ÄÁì∂ÂÖÖÊª°Áà±ÂøÉÁöÑËä±Èú≤„ÄÇÂΩìÂ∞èÁéãÂ≠êÈóªÂà∞ËøôÁ•ûÂ•áËä±Èú≤ÁöÑÈ¶ôÊ∞îÊó∂Ôºå‰ªñËãçÁôΩÁöÑËÑ∏È¢äÂºÄÂßãÊ≥õËµ∑Á∫¢ÊôïÔºåË∫´‰Ωì‰πüÊ∏êÊ∏êÊÅ¢Â§ç‰∫ÜÂäõÈáè„ÄÇ',
                            'Â∞èÁéãÂ≠êÂ∫∑Â§çÂêéÔºå‰ªñÈóÆÂÖ¨‰∏ªËä±Êúµ‰∏∫‰ªÄ‰πà‰ºöÊúâËøôÊ†∑Á•ûÂ•áÁöÑÈ≠îÊ≥ï„ÄÇÁé´Áë∞ÂÖ¨‰∏ªÊ∏©ÊüîÂú∞ÂëäËØâ‰ªñÔºö"ÁúüÊ≠£ÁöÑÈ≠îÊ≥ï‰∏çÂú®‰∫éËä±ÊúµÔºåËÄåÂú®‰∫éÊàë‰ª¨ÂøÉ‰∏≠ÁöÑÂñÑËâØÂíåÁà±„ÄÇÂΩìÊàë‰ª¨ÁúüÂøÉÂÖ≥ÊÄÄÂà´‰∫∫Êó∂ÔºåÂ∞±ËÉΩÂàõÈÄ†Âá∫ÊúÄÁæéÂ•ΩÁöÑÂ•áËøπ„ÄÇ"',
                            '‰ªéÈÇ£‰ª•ÂêéÔºå‰∏§‰∏™ÁéãÂõΩÊàê‰∏∫‰∫ÜÊúÄÂ•ΩÁöÑÊúãÂèãÔºåÂ∞èÁéãÂ≠ê‰πüÂ≠¶‰ºö‰∫ÜÂÉèÁé´Áë∞ÂÖ¨‰∏ª‰∏ÄÊ†∑Áî®ÂñÑËâØÁöÑÂøÉÂØπÂæÖÊØè‰∏Ä‰∏™‰∫∫„ÄÇÁé´Áë∞ÂÖ¨‰∏ªÁöÑËä±Âõ≠ÂèòÂæóÊõ¥Âä†ÁπÅÁõõÔºåÂõ†‰∏∫Áà±ÂíåÂñÑËâØÁöÑÁßçÂ≠êÂ∑≤ÁªèÂú®ÊØè‰∏™‰∫∫ÂøÉ‰∏≠ÁîüÊ†πÂèëËäΩ„ÄÇ'
                        ]
                    }
                };

                // Ëé∑ÂèñÂåπÈÖçÁöÑÊïÖ‰∫ãÊàñÁîüÊàêËá™ÂÆö‰πâÊïÖ‰∫ã
                let story = storyTemplates[theme] || this.generateCustomStory(theme);
                
                // Ê®°ÊãüAIÁîüÊàêÁöÑÂª∂Ëøü
                await this.delay(2000 + Math.random() * 1000);
                
                return story;
            }

            generateCustomStory(theme) {
                const titles = [
                    `${theme}ÁöÑÂ•áÂ¶ôÂÜíÈô©`,
                    `ÂÖ≥‰∫é${theme}ÁöÑÊ∏©ÊöñÊïÖ‰∫ã`,
                    `${theme}‰∏éÈ≠îÊ≥ï‰∏ñÁïå`,
                    `ÂãáÊï¢ÁöÑ${theme}ÊàêÈïøËÆ∞`,
                    `${theme}ÁöÑÂèãË∞ä‰πãÊóÖ`,
                    `ÂñÑËâØ${theme}ÁöÑÁæéÂ•ΩÊÑøÊúõ`
                ];

                const paragraphs = [
                    `‰ªéÂâçÔºåÂú®‰∏Ä‰∏™ÂÖÖÊª°Â•áËøπÁöÑÂú∞ÊñπÔºåÊúâ‰∏Ä‰∏™ÂÖ≥‰∫é${theme}ÁöÑÂä®‰∫∫ÊïÖ‰∫ã„ÄÇÊïÖ‰∫ãÁöÑ‰∏ª‰∫∫ÂÖ¨ÊòØ‰∏Ä‰∏™ÂñÑËâØÂãáÊï¢ÁöÑÂ∞èÊúãÂèãÔºå‰ªñÂç≥Â∞ÜÂºÄÂßã‰∏ÄÊÆµÊîπÂèò‰∫∫ÁîüÁöÑÂ•áÂ¶ôÊóÖÁ®ãÔºåÂéªÂèëÁé∞${theme}ÁöÑÁúüÊ≠£ÊÑè‰πâ„ÄÇ`,
                    
                    `Ëøô‰∏™Â∞èÊúãÂèãÂØπ${theme}ÂÖÖÊª°‰∫ÜÂ•ΩÂ•áÂøÉÂíåÂêëÂæÄ„ÄÇÊúâ‰∏ÄÂ§©Ôºå‰ªñ‰∏ãÂÆöÂÜ≥ÂøÉË¶ÅËµ∞Âá∫ËàíÈÄÇÁöÑÂÆ∂ÔºåÂéªÊé¢Á¥¢Ëøô‰∏™ÂÖÖÊª°Êó†ÈôêÂèØËÉΩÁöÑÂπøÈòî‰∏ñÁïåÔºåÂØªÊâæÂ±û‰∫éËá™Â∑±ÁöÑÁ≠îÊ°àÂíåÊ¢¶ÊÉ≥„ÄÇÊØè‰∏ÄÊ≠•ÈÉΩÂÖÖÊª°‰∫ÜÊñ∞ÁöÑÂèëÁé∞ÂíåÊÉäÂñú„ÄÇ`,
                    
                    `Âú®ÂÖÖÊª°ÊåëÊàòÁöÑÊóÖÈÄî‰∏≠ÔºåÂ∞èÊúãÂèãÈÅáÂà∞‰∫ÜÂêÑÁßçÂêÑÊ†∑ÊúâË∂£ÁöÑÊúãÂèãÂíåÊÑèÊÉ≥‰∏çÂà∞ÁöÑÂõ∞Èöæ„ÄÇÊØè‰∏ÄÊ¨°ÁªèÂéÜÈÉΩÂÉè‰∏ÄÂ†ÇÁèçË¥µÁöÑ‰∫∫ÁîüËØæÁ®ãÔºåËÆ©‰ªñÂ≠¶Âà∞‰∫ÜÊñ∞ÁöÑÁü•ËØÜÔºå‰πüËÆ©‰ªñÁöÑÂøÉÁÅµÂèòÂæóÊõ¥Âä†ÂãáÊï¢„ÄÅÊô∫ÊÖßÂíåÂÆΩÂÆπ„ÄÇ`,
                    
                    `ÈÄöËøá‰∏é${theme}Áõ∏ÂÖ≥ÁöÑÁßçÁßçÁ≤æÂΩ©ÂÜíÈô©ÂíåÊÑü‰∫∫ÁªèÂéÜÔºåÂ∞èÊúãÂèã‰∏ç‰ªÖÂ∏ÆÂä©‰∫ÜËÆ∏Â§öÈúÄË¶ÅÂ∏ÆÂä©ÁöÑ‰∫∫ÔºåËß£ÂÜ≥‰∫Ü‰ªñ‰ª¨ÁöÑÂõ∞ÈöæÔºå‰πüÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÂèëÁé∞‰∫ÜËá™Â∑±ÂÜÖÂøÉÊ∑±Â§ÑÈöêËóèÁöÑÂ∑®Â§ßÂäõÈáèÂíåÊó†Èôê‰ª∑ÂÄº„ÄÇ`,
                    
                    `Âú®ÁªèÂéÜ‰∫ÜÈáçÈáçËÄÉÈ™åÂíåÊàêÈïøÂêéÔºåÂ∞èÊúãÂèãÁªà‰∫éÊ∑±ÂàªÁêÜËß£‰∫Ü${theme}ÁöÑÁúüÊ≠£Âê´‰πâÂíåÁèçË¥µ‰ª∑ÂÄº„ÄÇ‰ªñÂ∏¶ÁùÄÊª°ÂøÉÁöÑÊî∂Ëé∑„ÄÅÁæéÂ•ΩÁöÑÂõûÂøÜÂíåÊñ∞ÁªìËØÜÁöÑÊúãÂèã‰ª¨ÂõûÂà∞‰∫ÜÂÆ∂Ôºå‰ΩÜ‰ªñÁöÑÂøÉÂ¢ÉÂ∑≤ÁªèÂèòÂæóÊõ¥Âä†ÂÆΩÂπø„ÄÅÊ∏©ÊöñÂíåÂÖÖÊª°Â∏åÊúõ„ÄÇ`,
                    
                    `Ëøô‰∏™ÂÖ≥‰∫é${theme}ÁöÑÁæé‰∏ΩÊïÖ‰∫ãÂëäËØâÊàë‰ª¨‰∏Ä‰∏™Ê∞∏ÊÅíÁöÑÈÅìÁêÜÔºöÊØè‰∏™‰∫∫ÈÉΩÊã•ÊúâËá™Â∑±Áã¨ÁâπËÄåÁèçË¥µÁöÑ‰ª∑ÂÄºÔºåÂè™Ë¶ÅÊàë‰ª¨‰øùÊåÅÂñÑËâØÁ∫ØÁúüÁöÑÂøÉÂíåÂãáÊï¢ÂùöÊåÅÁöÑÁ≤æÁ•ûÔºåÂ∞±‰∏ÄÂÆöËÉΩÂ§üÂàõÈÄ†Â±û‰∫éËá™Â∑±ÁöÑÁ≤æÂΩ©‰∫∫ÁîüÔºåËÆ©‰∏ñÁïåÂõ†‰∏∫Êàë‰ª¨ÁöÑÂ≠òÂú®ËÄåÂèòÂæóÊõ¥Âä†ÁæéÂ•Ω„ÄÇ`
                ];

                return {
                    title: titles[Math.floor(Math.random() * titles.length)],
                    paragraphs
                };
            }

            async generateImages(story) {
                if (!story) return;
                
                story.images = [];
                
                // È´òË¥®ÈáèÂõæÁâáÂ∫ìÔºåÊ†πÊçÆÂÜÖÂÆπÂåπÈÖç
                const imageLibrary = {
                    // Âä®Áâ©Áõ∏ÂÖ≥
                    'ÂÖîÂ≠ê': [
                        'https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1425082661705-1834bfd09dca?w=400&h=300&fit=crop&q=80'
                    ],
                    'Ê£ÆÊûó': [
                        'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop&q=80'
                    ],
                    'ÂèãË∞ä': [
                        'https://images.unsplash.com/photo-1529903475582-154eb4c7ee9a?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1523800503107-5bc3ba2a6f81?w=400&h=300&fit=crop&q=80'
                    ],
                    'Êµ∑Â∫ï': [
                        'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=300&fit=crop&q=80'
                    ],
                    'Â§™Á©∫': [
                        'https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=300&fit=crop&q=80'
                    ],
                    'ÂÖ¨‰∏ª': [
                        'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop&q=80'
                    ],
                    'Ëä±Âõ≠': [
                        'https://images.unsplash.com/photo-1492571350019-22de08371fd3?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400&h=300&fit=crop&q=80'
                    ],
                    'ÂÜíÈô©': [
                        'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=300&fit=crop&q=80',
                        'https://images.unsplash.com/photo-1506197603052-3cc9c3a201bd?w=400&h=300&fit=crop&q=80'
                    ]
                };

                // ÈªòËÆ§ÂõæÁâá
                const defaultImages = [
                    'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop&q=80',
                    'https://images.unsplash.com/photo-1529655683826-aba9b3e77383?w=400&h=300&fit=crop&q=80',
                    'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&q=80',
                    'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop&q=80',
                    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop&q=80',
                    'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop&q=80'
                ];

                for (let i = 0; i < story.paragraphs.length; i++) {
                    let selectedImages = defaultImages;
                    
                    // Ê†πÊçÆÊÆµËêΩÂÜÖÂÆπÂíåÊïÖ‰∫ãÊ†áÈ¢òÈÄâÊã©ÂêàÈÄÇÁöÑÂõæÁâá
                    const content = (story.paragraphs[i] + ' ' + story.title).toLowerCase();
                    
                    for (const [keyword, images] of Object.entries(imageLibrary)) {
                        if (content.includes(keyword) || content.includes(keyword.toLowerCase())) {
                            selectedImages = images;
                            break;
                        }
                    }
                    
                    // ÈÄâÊã©ÂõæÁâáÂπ∂Ê∑ªÂä†Âà∞ÊïÖ‰∫ã‰∏≠
                    const imageIndex = i % selectedImages.length;
                    story.images.push(selectedImages[imageIndex]);
                    
                    await this.delay(200 + Math.random() * 300); // Ê®°ÊãüÁîüÊàêÂª∂Ëøü
                }

                console.log('üé® ÊïÖ‰∫ãÊèíÁîªÁîüÊàêÂÆåÊàêÔºåÂÖ±', story.images.length, 'Âº†');
            }

            animateLoadingSteps() {
                const steps = ['step1', 'step2', 'step3'];
                let currentStep = 0;

                this.loadingInterval = setInterval(() => {
                    if (currentStep < steps.length) {
                        const stepElement = document.getElementById(steps[currentStep]);
                        if (stepElement) {
                            stepElement.classList.add('active');
                        }
                        currentStep++;
                    } else {
                        clearInterval(this.loadingInterval);
                        this.loadingInterval = null;
                    }
                }, 800);
            }

            showStoryPage() {
                this.showPage('storyPage');
                this.updateStoryDisplay();
            }

            updateStoryDisplay() {
                if (!this.currentStory) return;

                const storyTitle = document.getElementById('storyTitle');
                const currentPage = document.getElementById('currentPage');
                const totalPages = document.getElementById('totalPages');
                const storyParagraph = document.getElementById('storyParagraph');

                if (storyTitle) storyTitle.textContent = this.currentStory.title;
                if (currentPage) currentPage.textContent = this.currentPageIndex + 1;
                if (totalPages) totalPages.textContent = this.currentStory.paragraphs.length;
                if (storyParagraph) storyParagraph.textContent = this.currentStory.paragraphs[this.currentPageIndex];
                
                // Êõ¥Êñ∞ÂõæÁâá
                this.updateStoryImage();
                
                // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆÁä∂ÊÄÅ
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                
                if (prevBtn) prevBtn.disabled = this.currentPageIndex === 0;
                if (nextBtn) {
                    nextBtn.textContent = this.currentPageIndex === this.currentStory.paragraphs.length - 1 ? 'ÁªìÊùü ‚Üí' : '‰∏ã‰∏ÄÈ°µ ‚Üí';
                }
                
                // ÂÅúÊ≠¢ÂΩìÂâçÊí≠Êîæ
                this.stopPlayback();
            }

            updateStoryImage() {
                const img = document.getElementById('storyImg');
                const loading = document.getElementById('imageLoading');
                
                if (!img || !loading || !this.currentStory?.images) return;
                
                const imageUrl = this.currentStory.images[this.currentPageIndex];
                if (imageUrl) {
                    loading.style.display = 'flex';
                    img.style.display = 'none';
                    
                    img.onload = () => {
                        loading.style.display = 'none';
                        img.style.display = 'block';
                    };
                    
                    img.onerror = () => {
                        loading.style.display = 'none';
                        img.style.display = 'block';
                        // ‰ΩøÁî®ÈªòËÆ§Âç†‰ΩçÂõæÁâá
                        img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjQwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiNGNUY1RjUiLz48cGF0aCBkPSJNMTc1IDEyNUwyMjUgMTc1TDI3NSAxMjVIMzI1TDI3NSA3NUwyMjUgMTI1TDE3NSA3NUgxMjVMMTc1IDEyNVoiIGZpbGw9IiNEMUQxRDEiLz48L3N2Zz4=';
                    };
                    
                    img.src = imageUrl;
                    img.alt = `ÊïÖ‰∫ãÊèíÁîª - Á¨¨${this.currentPageIndex + 1}È°µ`;
                }
            }

            previousPage() {
                if (this.currentPageIndex > 0) {
                    this.currentPageIndex--;
                    this.updateStoryDisplay();
                    this.showToast(`üìñ Á¨¨ ${this.currentPageIndex + 1} È°µ`);
                }
            }

            nextPage() {
                if (this.currentPageIndex < this.currentStory.paragraphs.length - 1) {
                    this.currentPageIndex++;
                    this.updateStoryDisplay();
                    this.showToast(`üìñ Á¨¨ ${this.currentPageIndex + 1} È°µ`);
                } else {
                    // Âà∞ËææÊúÄÂêé‰∏ÄÈ°µÔºåÊòæÁ§∫ÁªìÊùüÈ°µÈù¢
                    this.showPage('endPage');
                    this.showToast('üéâ ÊïÖ‰∫ãËØªÂÆå‰∫ÜÔºÅÂ∏åÊúõ‰Ω†ÂñúÊ¨¢');
                }
            }

            togglePlayback() {
                if (this.isPlaying) {
                    this.stopPlayback();
                } else {
                    this.startPlayback();
                }
            }

            startPlayback() {
                if (!this.currentStory || !this.speechSynthesis) {
                    this.showToast('‚ùå ËØ≠Èü≥ÂäüËÉΩÊöÇ‰∏çÂèØÁî®');
                    return;
                }

                const text = this.currentStory.paragraphs[this.currentPageIndex];
                const speedSelect = document.getElementById('speedSelect');
                const speed = speedSelect ? parseFloat(speedSelect.value) : 1.0;

                this.currentUtterance = new SpeechSynthesisUtterance(text);
                this.currentUtterance.rate = speed;
                this.currentUtterance.pitch = 1.1;
                this.currentUtterance.volume = 1;

                // ËÆæÁΩÆ‰∏≠ÊñáËØ≠Èü≥
                const voices = this.speechSynthesis.getVoices();
                const chineseVoice = voices.find(voice => 
                    voice.lang.includes('zh') || 
                    voice.lang.includes('CN') ||
                    voice.name.includes('Chinese')
                );
                if (chineseVoice) {
                    this.currentUtterance.voice = chineseVoice;
                }

                this.currentUtterance.onstart = () => {
                    this.isPlaying = true;
                    this.updatePlayButton();
                    this.startTextHighlight(text);
                    console.log('üéµ ÂºÄÂßãËØ≠Èü≥ÊúóËØª');
                };

                this.currentUtterance.onend = () => {
                    this.isPlaying = false;
                    this.updatePlayButton();
                    this.clearTextHighlight();
                    console.log('‚èπÔ∏è ËØ≠Èü≥ÊúóËØªÁªìÊùü');
                };

                this.currentUtterance.onerror = (error) => {
                    this.isPlaying = false;
                    this.updatePlayButton();
                    this.showToast('üòî ËØ≠Èü≥Êí≠ÊîæÂá∫ÈîôÔºåËØ∑ÈáçËØï');
                    console.error('‚ùå TTSÈîôËØØ:', error);
                };

                try {
                    this.speechSynthesis.speak(this.currentUtterance);
                    this.showToast('üéµ ÂºÄÂßãÊúóËØªÊïÖ‰∫ã');
                } catch (error) {
                    console.error('‚ùå ËØ≠Èü≥Êí≠ÊîæÂ§±Ë¥•:', error);
                    this.showToast('‚ùå ËØ≠Èü≥ÂäüËÉΩÊöÇ‰∏çÂèØÁî®');
                }
            }

            stopPlayback() {
                if (this.speechSynthesis) {
                    this.speechSynthesis.cancel();
                }
                this.isPlaying = false;
                this.updatePlayButton();
                this.clearTextHighlight();
            }

            updatePlayButton() {
                const playBtn = document.getElementById('playBtn');
                if (playBtn) {
                    playBtn.textContent = this.isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è';
                    playBtn.title = this.isPlaying ? 'ÊöÇÂÅúÊúóËØª' : 'Êí≠ÊîæÊúóËØª';
                }
            }

            startTextHighlight(text) {
                this.clearTextHighlight();
                
                const paragraph = document.getElementById('storyParagraph');
                if (!paragraph || !text) return;

                const chars = text.split('');
                let currentIndex = 0;
                
                const highlightInterval = setInterval(() => {
                    if (currentIndex < chars.length && this.isPlaying) {
                        this.highlightCharacter(paragraph, currentIndex, text);
                        currentIndex++;
                    } else {
                        clearInterval(highlightInterval);
                    }
                }, 120); // Ë∞ÉÊï¥È´ò‰∫ÆÈÄüÂ∫¶
                
                this.highlightTimeout = highlightInterval;
            }

            highlightCharacter(paragraph, index, originalText) {
                if (!paragraph || !originalText) return;

                const beforeText = originalText.substring(0, index);
                const currentChar = originalText.charAt(index);
                const afterText = originalText.substring(index + 1);
                
                paragraph.innerHTML = beforeText + 
                                     `<span class="highlight">${currentChar}</span>` + 
                                     afterText;
            }

            clearTextHighlight() {
                if (this.highlightTimeout) {
                    clearInterval(this.highlightTimeout);
                    this.highlightTimeout = null;
                }
                
                const paragraph = document.getElementById('storyParagraph');
                if (paragraph && this.currentStory) {
                    paragraph.textContent = this.currentStory.paragraphs[this.currentPageIndex] || '';
                }
            }

            saveStory() {
                if (!this.currentStory) {
                    this.showToast('‚ùå Ê≤°ÊúâÊïÖ‰∫ãÂèØ‰ª•‰øùÂ≠ò');
                    return;
                }
                
                try {
                    const savedStories = JSON.parse(localStorage.getItem('savedStories') || '[]');
                    const storyToSave = {
                        ...this.currentStory,
                        savedAt: new Date().toISOString(),
                        id: Date.now()
                    };
                    
                    savedStories.push(storyToSave);
                    localStorage.setItem('savedStories', JSON.stringify(savedStories));
                    
                    this.showToast('üíæ ÊïÖ‰∫ãÂ∑≤‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®ÔºÅ');
                    console.log('üíæ ÊïÖ‰∫ã‰øùÂ≠òÊàêÂäü:', storyToSave.title);
                } catch (error) {
                    console.error('‚ùå ‰øùÂ≠òÊïÖ‰∫ãÂ§±Ë¥•:', error);
                    this.showToast('üòî ‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÊµèËßàÂô®ËÆæÁΩÆ');
                }
            }

            shareStory() {
                if (!this.currentStory) {
                    this.showToast('‚ùå Ê≤°ÊúâÊïÖ‰∫ãÂèØ‰ª•ÂàÜ‰∫´');
                    return;
                }
                
                const shareText = `ÊàëÂú®AIÁªòÊú¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Á≤æÂΩ©ÁöÑÊïÖ‰∫ãÔºö„Ää${this.currentStory.title}„Äã\n\nËøôÊòØ‰∏Ä‰∏™‰∏ì‰∏∫Â≠©Â≠êËÆæËÆ°ÁöÑAIÁªòÊú¨Âàõ‰ΩúÂ∑•ÂÖ∑ÔºåÊîØÊåÅÊïÖ‰∫ãÁîüÊàê„ÄÅÊèíÁîªÈÖçÂõæÂíåËØ≠Èü≥ÊúóËØª„ÄÇÂø´Êù•‰∏ÄËµ∑Âàõ‰ΩúÂ±û‰∫é‰Ω†ÁöÑÊïÖ‰∫ãÂêßÔºÅ\n\n‚ú® ÁâπËâ≤ÂäüËÉΩÔºö\nüé® AIÊô∫ËÉΩÊïÖ‰∫ãÁîüÊàê\nüñºÔ∏è Á≤æÁæéÊèíÁîªÈÖçÂõæ\nüéµ ËØ≠Èü≥ÊúóËØªË∑üËØª\nüì± ÁßªÂä®Á´Ø‰ºòÂåñËÆæËÆ°`;
                
                if (navigator.share) {
                    navigator.share({
                        title: `AIÁªòÊú¨ - ${this.currentStory.title}`,
                        text: shareText,
                        url: window.location.href
                    }).then(() => {
                        this.showToast('üì§ ÂàÜ‰∫´ÊàêÂäüÔºÅ');
                    }).catch((error) => {
                        console.log('ÂàÜ‰∫´ÂèñÊ∂àÊàñÂ§±Ë¥•:', error);
                        this.fallbackShare(shareText);
                    });
                } else {
                    this.fallbackShare(shareText);
                }
            }

            fallbackShare(text) {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text).then(() => {
                        this.showToast('üìã ÂàÜ‰∫´ÊñáÊ°àÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ');
                    }).catch(() => {
                        this.showManualShare(text);
                    });
                } else {
                    this.showManualShare(text);
                }
            }

            showManualShare(text) {
                // ÂàõÂª∫‰∏¥Êó∂ÊñáÊú¨Âå∫ÂüüÁî®‰∫éÂ§çÂà∂
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    this.showToast('üìã ÂàÜ‰∫´ÊñáÊ°àÂ∑≤Â§çÂà∂ÔºÅ');
                } catch (err) {
                    this.showToast('üí° ËØ∑ÊâãÂä®Â§çÂà∂ÂàÜ‰∫´ÊñáÊ°à');
                    console.log('ÂàÜ‰∫´ÂÜÖÂÆπ:', text);
                }
                
                document.body.removeChild(textArea);
            }

            goHome() {
                this.stopPlayback();
                this.currentStory = null;
                this.currentPageIndex = 0;
                
                const storyInput = document.getElementById('storyInput');
                if (storyInput) {
                    storyInput.value = '';
                    storyInput.focus();
                }
                
                this.showPage('homePage');
                this.showToast('üè† Ê¨¢ËøéÂõûÂà∞È¶ñÈ°µÔºåÂºÄÂßãÊñ∞ÁöÑÊïÖ‰∫ãÂàõ‰ΩúÂêßÔºÅ');
            }

            showPage(pageId) {
                // Ê∏ÖÁêÜÂä†ËΩΩÂä®Áîª
                if (this.loadingInterval) {
                    clearInterval(this.loadingInterval);
                    this.loadingInterval = null;
                }

                // ÈáçÁΩÆÊâÄÊúâÊ≠•È™§Áä∂ÊÄÅ
                document.querySelectorAll('.step').forEach(step => {
                    step.classList.remove('active');
                });

                // ÂàáÊç¢È°µÈù¢
                document.querySelectorAll('.page').forEach(page => {
                    page.style.display = 'none';
                });
                
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.style.display = 'flex';
                    console.log('üìÑ ÂàáÊç¢Âà∞È°µÈù¢:', pageId);
                }
            }

            showToast(message, duration = 3000) {
                console.log('üì¢', message);
                const toast = document.getElementById('toast');
                if (!toast) return;

                toast.textContent = message;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, duration);
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            // Ê∏ÖÁêÜÊñπÊ≥ï
            destroy() {
                this.stopPlayback();
                if (this.loadingInterval) {
                    clearInterval(this.loadingInterval);
                }
                if (this.highlightTimeout) {
                    clearInterval(this.highlightTimeout);
                }
            }
        }

        // Â∫îÁî®ÂàùÂßãÂåñ
        let storyApp = null;

        document.addEventListener('DOMContentLoaded', () => {
            console.log('üéØ DOMÂÜÖÂÆπÂä†ËΩΩÂÆåÊàê');
            storyApp = new StoryApp();
        });

        // È°µÈù¢Âç∏ËΩΩÊó∂Ê∏ÖÁêÜËµÑÊ∫ê
        window.addEventListener('beforeunload', () => {
            if (storyApp) {
                storyApp.destroy();
            }
        });

        // Èò≤Ê≠¢È°µÈù¢Áº©ÊîæÂíåÂèåÂáª
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = new Date().getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, { passive: false });

        // Á¶ÅÁî®Âè≥ÈîÆËèúÂçï
        document.addEventListener('contextmenu', function(event) {
            event.preventDefault();
        });

        // PWA ÂÆâË£ÖÊèêÁ§∫
        let deferredPrompt = null;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('üí° PWAÂÆâË£ÖÊèêÁ§∫Â∑≤ÂáÜÂ§á');
        });

        // ÈîôËØØÂ§ÑÁêÜ
        window.addEventListener('error', (error) => {
            console.error('üö® ÂÖ®Â±ÄÈîôËØØ:', error);
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error('üö® Êú™Â§ÑÁêÜÁöÑPromiseÈîôËØØ:', event.reason);
        });

        console.log('üéâ AIÁªòÊú¨Â∫îÁî®ËÑöÊú¨Âä†ËΩΩÂÆåÊàê');
    </script>
</body>
</html>